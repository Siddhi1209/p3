
<?php
        include("../config.php");
        $mldate = trim(file_get_contents("/opt/hpws/apache/cgi-bin/trials/bip/data/TESTING/MFLAGS_D"));
        $sys_stat = trim(file_get_contents("/opt/hpws/apache/cgi-bin/trials/bip/data/TESTING/sys_stat1.txt"));
        $getDDcrr = $_GET['date'];
        if(empty($getDDcrr)){
                $crdate  = $mldate;
        }
        else{
                $crdate  = $getDDcrr;
        }
        $dateyear=trim(substr($crdate,0,4));
        $dateyearmonth=trim(substr($crdate,0,6));
        //$currpath = "/opt/hpws/apache/cgi-bin/trials/bip/data/TESTING/".$dateyear."/".$dateyearmonth."/".$crdate."/";
        $prevdate=date("Ymd",strtotime("-1 day",strtotime($crdate)));
        if($mldate == $crdate){
                $currpath = "/opt/hpws/apache/cgi-bin/trials/bip/data/TESTING/";
        }
        else{
                $currpath = "/opt/hpws/apache/cgi-bin/trials/bip/data/TESTING/".$dateyear."/".$dateyearmonth."/".$crdate."/";
        }
?>
<!DOCTYPE html>
<html>
<head>
        <meta charset="UTF-8">
        <?php header("Cache-Control:no-cache,must-revalidate");?>
        <title>RTGS INCOMING ACK MONITORING Page</title>
        <meta http-equiv="refresh" content="600">
        <meta content='Vedant Mane' name='developer'>
        <meta content='width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no' name='viewport'>
        <link href="../css/bootstrap.min.css?x=<?php echo rand(5555,9999); ?>" rel="stylesheet" type="text/css" />
        <link href="../font-awesome/css/font-awesome.min.css?x=<?php echo rand(5555,9999); ?>" rel="stylesheet" type="text/css" />
        <link href="../css/AdminLTE.min.css?x=<?php echo rand(5555,9999); ?>" rel="stylesheet" type="text/css" />
        <link href="../css/skins/_all-skins.min.css?x=<?php echo rand(5555,9999); ?>" rel="stylesheet" type="text/css" />
        <link href="../css/compactPage.css?x=<?php echo rand(5555,9999); ?>" rel="stylesheet" type="text/css" />
        <link href="../css/normalize.min.css" rel="stylesheet" >
        <link href="../css/progress.css" rel="stylesheet" >
        <link rel="stylesheet" href="../dtable/jquery.dataTables.min.css" type="text/css" >
        <link rel="stylesheet" href="../dtable/buttons.dataTables.min.css" type="text/css">
        <link rel="stylesheet" href="../dtable/fixedHeader.bootstrap.css" type="text/css">
        <link rel="shortcut icon" href="SBI_log.ico" type="image/x-icon">
        <link href="../css/darklight.css" rel="stylesheet" type="text/css" />

        <div id="dateModal" class="modal fade" role="dialog">
                <div class="modal-dialog modal-sm">
                        <div class="modal-content">
                                <div class="modal-header">
                                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                                        <h4 class="panel-heading modal-title ">Enter Date </h4>
                                </div>
                                <div class="modal-body text-center">
                                        <input type="date" class="form-control" id="ll" onchange="pageRedirection()" required>  <br>
                                </div>
                        </div>
                </div>
        </div>
        <style>
        @media(max-width:990px){
                #myheader.main-header{
                        display: none !important;
                }
        }
        .noCursor{
                cursor:default !important;
        }
        .bg-tcs{
                backgrounnd-color:#486092;
        }
        </style>
</head>
<body class="skin-blue sidebar-collapse" oncontextmenu="return false;">
        <div class="col-md-6">
                <div class="box box-primary box-solid">
                        <div class="box-header bg-tcs-active">
                                <!--<h3 class="box-title">RTGS INCOMING GATEWAY MONITORING</h3>-->
                                <h3 class="box-title">RTGS INCOMING ACK MONITORING </h3> 
                                <span class="datemodified" style="float:right;font-size:18px;">
                                        <i class="fa fa-fw fa-clock-o"></i>
                                        <?php echo shell_exec("ls -lrt /opt/hpws/apache/cgi-bin/trials/bip/data/TESTING/rtgsng_ack_in_12apps.txt.$crdate|awk '{print $6,$7,$8}'");?>
                                </span>
                        </div>
                        <div class="box-body table-responsive">
                                <table class="table table-bordered table-striped text-center" id="neftrepost">
                                        <thead>
                                                <tr>
                                                        <th class="text-center">ERROR</th>
                                                        <th class="text-center">M</th>
                                                        <th class="text-center">S1</th>
                                                        <th class="text-center">S2</th>
                                                        <th class="text-center">S3</th>
                                                        <th class="text-center">S4</th>
                                                        <th class="text-center">S5</th>
                                                        <th class="text-center">S6</th>
                                                        <th class="text-center">S7</th>
                                                        <th class="text-center">S8</th>
                                                        <th class="text-center">S9</th>
                                                        <th class="text-center">S10</th>
                                                        <th class="text-center">S11</th>
                                                        <th class="text-center">S12</th>
                                                        <th class="text-center">S13</th>
                                                        <th class="text-center">S14</th>
                                                        <th class="text-center">S15</th>
                                                </tr>
                                        </thead>
                                        <tbody>
                                        <?php
                                                echo "<tr>";
                                                $data = file("/opt/hpws/apache/cgi-bin/trials/bip/data/TESTING/rtgsng_ack_in_12apps.txt.".$crdate);
                                                echo "<td style='color:black;'>01ERR 0146</td>";
                                                foreach($data as $key=>$value){
                                                        $each_data = explode(",",$value);
                                                        foreach($each_data as $index => $value1){
                                                                if (is_numeric($value1) && number_format($value1) == '0') {
                                                                        echo "<td style='color:green;'><i class='fa fa-check'></i></td>";
                                                                }
                                                                elseif (is_numeric($value1) && number_format($value1) > 0) {
                                                                        echo "<td style='color:red;'><i class='fa fa-close'></i></td>";
                                                                }
                                                                elseif ($value1 === 'NA') {
                                                                        echo "<td style='color:black;'><i class='fa fa-minus'></i></td>";
                                                                }
                                                                else {
                                                                        echo "<td style='color:black;'><i class='fa fa-minus'></i></td>";
                                                                }
                                                        }
                                                }
                                                echo "</tr>";
                                        ?>
                                        </tbody>
                                </table>
                        </div>
                </div>
        </div>

        <script src="../js/jQuery-2.1.3.min.js?x=<?php echo rand(5555,9999); ?>"></script>
        <script src="../js/bootstrap.min.js?x=<?php echo rand(5555,9999); ?>" type="text/javascript"></script>
        <script src="../js/app.min.js?x=<?php echo rand(5555,9999); ?>" type="text/javascript"></script>
        <script type="text/javascript" language="javascript" src="../dtable/jquery.dataTables.min.js"></script>
        <script type="text/javascript" language="javascript" src="../js/dataTables.fixedHeader.min.js"></script>
        <script type="text/javascript" language="javascript" src="../dtable/dataTables.buttons.min.js"></script>
        <script type="text/javascript" language="javascript" src="../dtable/jszip.min.js"></script>
        <script type="text/javascript" language="javascript" src="../dtable/pdfmake.min.js"></script>
        <script type="text/javascript" language="javascript" src="../dtable/vfs_fonts.js"></script>
        <script type="text/javascript" language="javascript" src="../dtable/buttons.html5.min.js"></script>
        <script type="text/javascript">
                $(document).ready(function() {
                        $('#neftrepost').DataTable({
                                order: [[ 0, "desc" ]],
                                dom: 'Bfrtip',
                                fixedHeader:true,
                                bSort:true,
                                iDisplayLength:25,
                                bLengthChange:false,
                                buttons: [
                                        'copyHtml5',
                                        'pdfHtml5'
                                ]
                        });
                });
        </script>
</body>
</html>
